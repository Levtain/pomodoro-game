# MTPM方法论 - 多任务并行模式

## 📖 概述

**MTPM（Multi-Task Parallel Mode）** 是一种高效的工作模式，充分利用AI多任务并行能力，结合Discord多频道空间隔离，实现多个任务分支同时进行，主频道汇总汇报的完整工作流。

---

## 🎯 核心理念

1. **少量上下文**：每个Agent只读工作要求，产出是下一环的工作物料和上下文
2. **文档优先**：每一步都生成文档，便于追踪和复用
3. **并行执行**：2-4个任务分支同时进行，互不干涉
4. **主频道汇总**：所有任务分支在主频道汇报，主人汇总审批后向主人汇报
5. **Git规范**：每个任务分支完成后，都要提交产物和工作报告

---

## 📊 层级架构

```
私聊（主人的入口）
   ↓
【任务拆解 + 工作计划生成】
   ↓
【任务分支A】 ← 并行 → 【任务分支B】 ← 并行 → 【任务分支C】
   ↓                      ↓                      ↓
【工作频道1】         【工作频道2】         【工作频道3】
   ↓                      ↓                      ↓
【Agent工作流】       【Agent工作流】       【Agent工作流】
   ↓                      ↓                      ↓
【任务报告A】       【任务报告B】       【任务报告C】
   ↓                      ↓                      ↓
【主频道（汇总+整合）】
   ↓
【主人审批】
   ↓
【主人汇报】
```

---

## 🔑 核心规则

1. **任务分支数量**：建议2-4个，避免管理复杂
2. **互不干涉**：任务分支之间不能有强依赖，避免竞争资源
3. **文档生成**：每一步都要生成文档
4. **Git提交**：每个任务分支完成后都要提交
5. **主频道汇报**：所有任务分支在主频道汇报
6. **审批流程**：主人审批后才向主人汇报
7. **少量上下文**：Agent只读工作要求，不重复读取

---

## 📋 适用场景

- **中型项目**：功能开发、系统集成、文档编写
- **并行任务**：多个独立任务可以同时进行
- **模块化项目**：任务可以拆解为互不干涉的模块

---

## 🚀 使用流程

### Step 1：任务拆解（2-4个分支）
将中型任务拆解为2-4个互不干涉的任务分支：
- 任务分支1：[具体任务]
- 任务分支2：[具体任务]
- 任务分支3：[具体任务]
- 任务分支4：[具体任务]

### Step 2：工作计划生成
为每个任务分支生成工作规划、工作要求、审核标准、报告模板。

### Step 3：分配工作频道
每个任务分支分配一个工作频道：
- 任务分支1 → 工作频道1
- 任务分支2 → 工作频道1
- 任务分支3 → 工作频道2
- 任务分支4 → 工作频道3

### Step 4：并行启动
所有任务分支同时启动，每个任务分支独立执行。

### Step 5：独立执行
每个任务分支按照Agent工作流执行：
- 收集 → 生成 → 自审核 → 达到审核标准 → 生成报告

### Step 6：结果汇总
所有任务分支完成后，在主频道汇总所有结果和交付物。

### Step 7：整合
将所有任务分支的交付物整合为完整的交付物。

---

## 🔧 技术要求

### 工作频道
- 每个任务分支分配一个工作频道
- 频道命名规范：`🔧 task-1-任务名称`
- 频道归属：放在同一分类下便于管理

### Agent工作流
- 收集→生成→自审核→达到审核标准→生成报告
- 使用统一的报告模板

### Git提交规范
- 提交类型：feat / fix / docs / chore / refactor / test / style
- 提交信息格式：类型 + 范围 + 标题 + 详细

---

## 📝 项目实例：番茄钟养成游戏

### 项目背景
- 项目名称：番茄钟养成游戏
- 核心功能：放置养成 + 番茄钟
- 技术栈：React + 网页插件
- 目标：可行性研究

### 任务分支拆解

#### 任务分支A：市场调研
- 具体任务：受众分析、竞品分析、用户痛点调研
- 预计时间：2小时
- 工作频道：🔧 task-market-research

#### 任务分支B：技术可行性
- 具体任务：React技术、浏览器插件架构、技术风险评估
- 预计时间：2小时
- 工作频道：🔧 task-tech-feasibility

#### 任务分支C：方案整合与Git仓库
- 具体任务：整合报告、创建Git仓库、撰写README
- 预计时间：2小时
- 工作频道：🔧 task-integration

### 执行情况

| 任务分支 | 预计时间 | 实际时间 | 完成情况 |
|---------|---------|---------|---------|
| A：市场调研 | 2小时 | 6分钟 | ✅ 完成 |
| B：技术可行性 | 2小时 | 20分钟 | ✅ 完成 |
| C：方案整合 | 2小时 | 10分钟 | ✅ 完成 |

**总计：** 37分钟（预估4小时，提前完成85%）

### 交付成果

- 市场调研报告：15,000字，8章
- 技术可行性报告：18,000字，7章
- 总体可行性报告：20,000字，8章
- Git仓库：https://github.com/Levtain/pomodoro-game

---

## 💡 最佳实践

### 1. 任务拆解
- 每个任务分支应该独立可执行
- 避免强依赖关系
- 任务量均衡，避免某个分支耗时过长

### 2. 工作要求编写
- 明确具体任务
- 列出所需资源
- 明确预期结果
- 制定审核标准

### 3. 频道管理
- 频道命名规范统一
- 任务完成后及时清理频道
- 主频道保持清晰汇总

### 4. 进度监控
- 定期检查子会话状态
- 及时处理超时或失败
- 主频道实时汇报进度

### 5. 文档管理
- 每个步骤都生成文档
- 文档结构统一
- Git及时提交

---

## ⚠️ 注意事项

1. **资源竞争**：确保不同任务分支不使用相同的资源（文件、数据库表）
2. **依赖关系**：任务分支之间不能有强依赖
3. **管理复杂度**：任务分支数量不要太多（建议2-4个）
4. **频道隔离**：每个任务分支有独立的工作频道

---

## 🎓 经验总结

### MTPM模式优势
- ✅ 并行执行提高效率
- ✅ 任务分支独立互不干扰
- ✅ 频道隔离避免混乱
- ✅ 文档优先便于追踪
- ✅ 适合中型项目

### Discord协作优势
- ✅ 实时沟通方便
- ✅ 频道管理灵活
- ✅ 权限控制精细
- ✅ 消息历史可查

### 需要改进的地方
- ⚠️ 子会证进度监控需要更主动
- ⚠️ 最终汇总流程可以更自动化
- ⚠️ Git仓库创建需要提前准备GitHub token
- ⚠️ 子会证超时处理需要完善

---

## 📚 相关文档

- [strategic-layer.md](./strategic-layer.md) - 战略层：里程碑驱动
- [tactical-layer.md](./tactical-layer.md) - 战术层：敏捷迭代
- [execution-layer.md](./execution-layer.md) - 执行层：事前确认
- [agent-workflow.md](./agent-workflow.md) - Agent工作流
- [git-commit-strategy.md](./git-commit-strategy.md) - Git提交策略

---

**最后更新：** 2026-02-07
**项目实例：** 番茄钟养成游戏可行性研究
**效率提升：** 85%（37分钟 vs 4小时预估）
